{% extends 'base.html' %}
{% load static %}

{% block meta %}
<meta name="description" content="Search results for {{ query }}">
{% endblock %}

{% block title %}
Search: {{ query }} - Mocajo Online Shop
{% endblock %}
{% block link %}<link rel="stylesheet" href="{% static 'css/home.css' %}">  {% endblock %}
{% block content %}

<div class="section-head mb-3">
  <div>
    <h2 class="section-title mb-1">Search results</h2>
    <p class="section-sub mb-0">
      You searched for: <b>{{ query }}</b>
      {% if products %}
        <span class="text-muted"> • {{ products|length }} item(s)</span>
      {% endif %}
    </p>
  </div>

  <a href="{% url 'moc_app:index' %}" class="btn btn-sage-outline">
    <i class="fas fa-arrow-left me-2"></i>Back to home
  </a>
</div>

{% if products %}
  <section class="mb-4">
    <div class="row g-3 g-lg-4">
      {% for pro in products %}
      <div class="col-6 col-md-4 col-lg-3">
        <div class="product-card">

          <div class="product-media">
            <a href="{{ pro.get_url }}" class="product-link">
              <img src="{{ pro.img.url }}" alt="{{ pro.name }}" class="product-img">
            </a>

            <div class="product-badges">
              <span class="badge-stock">Stock: {{ pro.stock }}</span>
            </div>
          </div>

          <div class="product-body">
            <a href="{{ pro.get_url }}" class="product-name">{{ pro.name }}</a>

            <div class="product-price">
              <span class="price">₹{{ pro.price }}</span>
            </div>

            <a href="{{ pro.get_url }}" class="btn btn-sage w-100 mt-2">View product</a>
          </div>

        </div>
      </div>
      {% endfor %}
    </div>
  </section>
{% else %}
  <div class="empty-card">
    <div class="empty-icon"><i class="fas fa-search"></i></div>
    <h5 class="mb-2">No results found</h5>
    <p class="text-muted mb-3">
      We couldn’t find any products for <b>{{ query }}</b>. Try a different keyword.
    </p>
    <a href="{% url 'moc_app:index' %}" class="btn btn-sage">Browse products</a>
  </div>
{% endif %}

{% endblock %}